<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>KBase Data API documentation &mdash; KBase Data API 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/kbase-logo.ico"/>
<link rel="stylesheet" href="_static/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="_static/css/kbase.css" type="text/css">
<jinja2.runtime.BlockReference object at 0x1085b3d90>

   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_api.html">Creating a Data API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="create_api.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#name-your-api">1. Name your API</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#create-a-directory">2. Create a directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#create-a-specification">3. Create a specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#generate-stubs">4. Generate stubs</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#create-python-api-modules">5. Create Python API modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#create-test-client-server">6. Create test client/server</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#test">7. Test!</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_api.html#publish-your-api">8. Publish your API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="taxon_api.html">Taxon Data API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="taxon_api.html#getting-a-taxonomic-object">Getting a Taxonomic object</a></li>
<li class="toctree-l2"><a class="reference internal" href="taxon_api.html#basic-operations">Basic operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="taxon_api.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="taxon_api.html#example-fetch-and-print-taxon">Example: Fetch and Print Taxon</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="taxon_api.html#advanced-operations">Advanced operations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="_source/modules.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="_source/doekbase.html">doekbase package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_source/doekbase.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_source/doekbase.data_api.html">doekbase.data_api package</a></li>
<li class="toctree-l4"><a class="reference internal" href="_source/doekbase.workspace.html">doekbase.workspace package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_source/doekbase.html#module-doekbase">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="kbase-data-api-documentation">
<h1>KBase Data API documentation<a class="headerlink" href="#kbase-data-api-documentation" title="Permalink to this headline">¶</a></h1>
<p>The Data API provides a unified entry point to retrieve and, eventually,
store KBase data objects. A simplified view of how the Data API relates to other
components of KBase is below:</p>
<div class="highlight-python"><div class="highlight"><pre>+------------------------------+
|Services/Narrative code cells |
+------------------------------+
    |                    ^
    v                    |
*******************************
||     Data API library      ||
*******************************
    ^                    |
    |                    v
+-----------------------------+
|     Workspace/Datastores    |
+-----------------------------+
</pre></div>
</div>
<p>Here we see that the Data API library is called by Services or Narrative code cells (via the backend Jupyter/IPython kernel), and communicates with the underlying data stores on behalf of its clients.</p>
</div>
<div class="section" id="using-the-data-api">
<h1>Using the Data API<a class="headerlink" href="#using-the-data-api" title="Permalink to this headline">¶</a></h1>
<p>There are two primary modes of using the Data API: interactively, as in the Narrative UI or
Jupyter noteboook, and programmatically, as from an installed service.
Interactively, the API can be imported into in the IPython/Jupyter notebook or
Narrative and used to explore and examine data objects.
Results will be automatically displayed as HTML and inline plots. Programmatically,
the same API can be imported into any Python code and used like a standard
library.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The integration of the Data API into the KBase Narrative is not quite done yet.
For now, you need to try it out in a recent (August 2015+) version of the Jupyter notebook.</p>
</div>
<p>In both cases, the <a class="reference internal" href="#core-api"><em>Core API</em></a> functions are used to access the objects.
For interactive use, and some programmatic use-cases, the <a class="reference internal" href="#highlevel-api"><em>High-level API</em></a>
will be more convenient.</p>
<div class="section" id="high-level-api">
<span id="highlevel-api"></span><h2>High-level API<a class="headerlink" href="#high-level-api" title="Permalink to this headline">¶</a></h2>
<p>This section covers how to <a class="reference internal" href="#highlevel-api-conf"><em>initialize the high-level API</em></a>
to access the KBase data as an authenticated user,
then how to <a class="reference internal" href="#highlevel-api-func"><em>use the provided functions</em></a>.</p>
<div class="section" id="configuration-and-authorization">
<span id="highlevel-api-conf"></span><h3>Configuration and Authorization<a class="headerlink" href="#configuration-and-authorization" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="functions">
<span id="highlevel-api-func"></span><h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="core-api">
<span id="id1"></span><h2>Core API<a class="headerlink" href="#core-api" title="Permalink to this headline">¶</a></h2>
<p>This section covers how to initialize the high-level API to access the KBase
data as an authenticated user, then how to use the provided functions.</p>
<div class="section" id="id2">
<h3>Configuration and Authorization<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id3">
<h3>Functions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="section" id="developer-notes">
<h1>Developer notes<a class="headerlink" href="#developer-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="running-tests">
<h2>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>Unit tests can be run with a file-based Workspace library, based on the
mongomock package and implemented in the <cite>biokbase.data_api.wsfile</cite> module.</p>
<p>This mode is activated by passing a directory path instead of a
regular URL to the <cite>&#8211;ws-url</cite> option for nosetests. This nosetest option is
enabled by a plugin in <cite>biokbase.data_api.tests.nose_plugin_wsurl</cite>,
that is referred to by the &#8220;entry_points&#8221; key in the configuration in the
setup.py script. It is recommended that you also pass the <cite>&#8211;wsfile-msgpack</cite>
option and use the msgpack output option when creating the input data (see below).</p>
<div class="section" id="step-1-create-test-data">
<h3>Step 1: Create test data<a class="headerlink" href="#step-1-create-test-data" title="Permalink to this headline">¶</a></h3>
<p>To create the test data for the file-based workspace, you need to dump some existing workspace objects into a directory. This is done with the <cite>dump_wsfile</cite> script in the bin/ directory (also installed by setup.py in the package bin path). An example invocation of this script is:</p>
<div class="highlight-python"><div class="highlight"><pre>dump_wsfile --url ci  --file test_data/test-objects.txt --msgpack --dir test_data -vv
</pre></div>
</div>
<p>This would dump all object IDs found in the file <cite>test_data/test-objects.txt</cite>
into the directory <cite>test_data</cite>, using the CI (continuous integration) workspace
server, formatting them using <a class="reference external" href="http://msgpack.org/">MessagePack</a>.</p>
<p>An <cite>objects.txt</cite> file simply lists full object IDs, i.e. &#8220;&lt;workspace&gt;/&lt;object&gt;[/&lt;version&gt;]&#8221;, one per line. Lines starting with
&#8220;#&#8221; and blank lines are ignored. For example:</p>
<div class="highlight-python"><div class="highlight"><pre># Genome
PrototypeReferenceGenomes/kb|g.3899
# Features
PrototypeReferenceGenomes/kb|g.3899_feature_container_gene
PrototypeReferenceGenomes/kb|g.3899_feature_container_CDS
PrototypeReferenceGenomes/kb|g.3899_feature_container_mRNA
# Taxon
993/674615/1
</pre></div>
</div>
</div>
<div class="section" id="step-2-run-tests">
<h3>Step 2: Run tests<a class="headerlink" href="#step-2-run-tests" title="Permalink to this headline">¶</a></h3>
<p>After this is done, the command-line to nosetests would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">nosetests</span> <span class="o">--</span><span class="n">ws</span><span class="o">-</span><span class="n">url</span><span class="o">=</span><span class="n">test_data</span>  <span class="o">--</span><span class="n">wsfile</span><span class="o">-</span><span class="n">msgpack</span>
</pre></div>
</div>
<p>The <cite>&#8211;ws-url</cite> option gives the path to the entire directory of files, and the <cite>&#8211;wsfile-msgpack</cite> means that it will load all the files ending in &#8221;.msgpack&#8221; in that directory into the file-based mongo mocking library for
the tests.</p>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="#">
    <img class="logo" src="_static/img/kbase-logo.png" alt="Logo"/>
    
  </a>
</p>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=kbase&repo=data_api&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_api.html">Creating a Data API</a></li>
<li class="toctree-l1"><a class="reference internal" href="taxon_api.html">Taxon Data API</a></li>
<li class="toctree-l1"><a class="reference internal" href="_source/modules.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="create_api.html" title="next chapter">Creating a Data API</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="container-fluid kbase-footer">
    <div class="row">
        <div class="col-md-12">
            <div class="footer-bar">
                <div class="kbase-footer-menu">
                    <ul id="menu-footer-menu" class="menu">
                        <li id="menu-item-664"
                            class="menu-item menu-item-type-post_type menu-item-object-page menu-item-664">
                            <a href="http://kbase.us/what-is-kbase/">About
                                KBase</a> <span class="footer-sep"></span></li>
                        <li id="menu-item-666"
                            class="menu-item menu-item-type-post_type menu-item-object-page menu-item-666">
                            <a href="http://kbase.us/terms-and-conditions/">Terms
                                and Conditions</a> <span
                                class="footer-sep"></span></li>
                        <li id="menu-item-667"
                            class="menu-item menu-item-type-post_type menu-item-object-page menu-item-667">
                            <a href="http://kbase.us/contact-us/">Contact Us</a>
                            <span class="footer-sep"></span></li>
                    </ul>
                </div>
                <!-- hard code the social icons for now -->
                <a href="https://www.facebook.com/pages/DOE-Systems-Biology-Knowledgebase/148332628600806"
                   target="_blank" style="height: 24px; display: inline-block;"
                   class="menu-item"><img
                        src="http://kbase.us/wp-content/themes/kbase-wordpress-theme/images/facebook-icon.png"></a>

                <span class="footer-sep"></span>

                <a href="https://twitter.com/DOEKbase" target="_blank"><img
                        src="http://kbase.us/wp-content/themes/kbase-wordpress-theme/images/twitter-icon.png"></a>

                <span class="footer-sep"></span>

                <a href="http://science.energy.gov/ber/">
                    <img src="_static/img/doe_office_of_science_250.png"
                         alt="doe_office_of_science_250.png" width="250"
                         height="42" target="_blank">
                </a>

            </div>
        </div>
    </div>
</div>
<jinja2.runtime.BlockReference object at 0x1085b3d90>

  </body>
</html>